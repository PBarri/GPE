<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:p="http://primefaces.org/ui"
	xmlns:gpe="http://gpe.org/ui">
	<p:panel id="main-title"
		styleClass="row wrapper border-bottom white-bg page-heading">
		<div class="col-xs-12">
			<h2 class="col-xs-12">
				<h:outputFormat value="#{msg['menu.projects.project.details']}">
					<f:param value="#{projectDetailsController.project.name}" />
				</h:outputFormat>
			</h2>
		</div>
	</p:panel>
	<p:panel id="main-content" styleClass="wrapper wrapper-content">
		<div class="ibox">
			<div class="ibox-title float-e-margins">
				<h5>#{msg['projects.detail.overview.title']}</h5>
				<div class="ibox-tools"></div>
			</div>
			<div class="ibox-content">
				<div class="row">
					<p:panel id="overview-logo-container" styleClass="project-logo-container col-xs-12 col-md-2"
					 	rendered="#{empty projectDetailsController.project.projectLogo}">
						<div id="overview-logo" class="square-box">
							<div class="square-content">
								<div class="project-logo-avatar" style="padding-top: 30%">
									<h:outputText value="#{projectDetailsController.project.projectTitle}" />
								</div>
							</div>
						</div>						
					</p:panel>
					<p:panel rendered="#{not empty projectDetailsController.project.projectLogo}">
						<div class="col-xs-12 col-md-2">
							<p:graphicImage value="#{projectDetailsController.project.projectLogo}" styleClass="img-responsive" />
						</div>
					</p:panel>
					<div id="overview-project" class="col-xs-12 col-md-10">
						<div class="row">
							<div class="form-horizontal without-padding">
								<div class="form-group col-xs-12 col-md-6">
									<p:outputLabel styleClass="control-label col-xs-4"
										value="#{msg['projects.detail.name']}"
										for="projectInfoName" />
									<div class="col-xs-8">
										<p:inputText id="projectInfoName" disabled="true"
											value="#{projectDetailsController.project.name}"
											tabindex="1" />
									</div>
								</div>
								<div class="form-group col-xs-12 col-md-6">
									<p:outputLabel styleClass="control-label col-xs-4"
										value="#{msg['projects.detail.code']}"
										for="projectInfoCode" />
									<div class="col-xs-8">
										<p:inputText id="projectInfoCode" disabled="true"
											value="#{projectDetailsController.project.projectCode}"
											tabindex="2" />
									</div>
								</div>
								<div class="form-group col-xs-12 col-md-6">
									<p:outputLabel styleClass="control-label col-xs-4"
										value="#{msg['projects.detail.type']}"
										for="projectType" />
									<div class="col-xs-8">
										<p:inputText id="projectType" disabled="true"
											value="#{msg[projectDetailsController.project.methodology.description]}"
											tabindex="3" />
									</div>
								</div>
								<div class="form-group col-xs-12 col-md-6">
									<p:outputLabel styleClass="control-label col-xs-4"
										value="#{msg['projects.detail.cvsCode']}"
										for="projectInfoCvsCode" />
									<div class="col-xs-8">
										<p:inputText id="projectInfoCvsCode" disabled="true"
											value="#{projectDetailsController.project.cvsCode}"
											tabindex="4" />
									</div>
								</div>						
								<div class="form-group col-xs-12 col-md-6">
									<p:outputLabel styleClass="control-label col-xs-4"
										value="#{msg['projects.detail.startDate']}"
										for="projectInfoDate" />
									<div class="col-xs-8">
										<p:inputText id="projectInfoDate" disabled="true"
											value="#{projectDetailsController.project.startDate}" converter="localDateConverter"
											tabindex="5" />
									</div>
								</div>
								<div class="form-group col-xs-12 col-md-6">
									<p:outputLabel styleClass="control-label col-xs-4"
										value="#{msg['projects.detail.createdBy']}"
										for="projectInfoCreatedBy" />
									<div class="col-xs-8">
										<p:inputText id="projectInfoCreatedBy" disabled="true"
											value="#{projectDetailsController.project.createdBy}"
											tabindex="6" />
									</div>
								</div>
							</div>
						</div>
						<div class="row">
							<div class="form-group col-xs-12">
								<p:outputLabel styleClass="control-label col-xs-12"
									value="#{msg['projects.detail.description']}"
									for="projectInfoDescription" />
								<div class="col-xs-12">
									<p:inputTextarea id="projectInfoDescription" disabled="true"
										value="#{projectDetailsController.project.description}"
										tabindex="7" />
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
		<div class="ibox">
			<div class="ibox-title float-e-margins">
				<h5>#{msg['projects.detail.members.title']}</h5>
				<div class="ibox-tools">
					<a class="collapse-link"><i class="fa fa-chevron-up" /></a>
				</div>
			</div>
			<div class="ibox-content">
				<gpe:cardList id="projectMembers">
					<gpe:card type="user" value="#{projectDetailsController.project.leader}" styleClass="col-xs-12 col-md-4" />
					<gpe:cards type="user" cardStyle="col-xs-12 col-md-4" value="#{projectDetailsController.project.managers}" />
					<div class="clearfix"></div>
				</gpe:cardList>
			</div>
		</div>
		<div class="ibox">
			<div class="ibox-title float-e-margins">
				<h5>#{msg['projects.detail.documents.title']}</h5>
				<div class="ibox-tools">
					<a class="collapse-link"><i class="fa fa-chevron-up" /></a>
				</div>
			</div>
			<div class="ibox-content">
			
			</div>
		</div>
		<div class="ibox">
			<div class="ibox-title float-e-margins">
				<h5>#{msg['projects.detail.servers.title']}</h5>
				<div class="ibox-tools">
					<a class="collapse-link"><i class="fa fa-chevron-up" /></a>
				</div>
			</div>
			<div class="ibox-content">
			
			</div>
		</div>
		<div class="ibox">
			<div class="ibox-title float-e-margins">
				<h5>
					<h:outputText value="#{msg['projects.detail.iterations.title']}" rendered="#{projectDetailsController.project.scrum}" />
					<h:outputText value="#{msg['projects.detail.requirements.title']}" rendered="#{projectDetailsController.project.metricaV3}" />
				</h5>
				<div class="ibox-tools">
					<h:form id="projectReqListForm">
						<a class="collapse-link"><i class="fa fa-chevron-up" /></a>
					</h:form>
				</div>
			</div>
			<div class="ibox-content">				
				<h:form id="reqDetailsForm">
					<p:commandButton type="button" icon="fa fa-plus" styleClass="add-datatable-button" 
						rendered="#{projectDetailsController.project.metricaV3}" alt="#{msg['projects.detail.newRequirement']}" />
					<p:commandButton type="button" icon="fa fa-plus" styleClass="add-datatable-button" 
						rendered="#{projectDetailsController.project.scrum}" alt="#{msg['projects.detail.newIteration']}" />
					<p:dataTable id="requirementTable" widgetVar="requirementTable"
						var="req" value="#{projectDetailsController.project.requeriments}"
						rowKey="#{req.id}" rows="10" paginator="true"
						paginatorAlwaysVisible="true"
						paginatorTemplate="{GPEPaginator} {FirstPage} {PreviousPage} {PageLinks} {NextPage} {LastPage}"
						rowsPerPageTemplate="5,10,25,50,75"
						rowsPerPageLabel="Número de requerimientos por página: "
						emptyMessage="#{msg['requirement.list.emptyMsg']}"
						selectionMode="single" lazy="true">
	
						<p:column id="codeColumn"
							headerText="#{msg['requirement.list.code']}">
							<h:outputText value="#{req.requirementCode}" />
						</p:column>
	
						<p:column id="nameColumn"
							headerText="#{msg['requirement.list.name']}">
							<h:outputText value="#{req.name}" />
						</p:column>
	
						<p:column id="projectColumn"
							headerText="#{msg['requirement.list.project']}">
							<h:outputText value="#{req.project.name}" />
						</p:column>
	
						<p:column id="percentageColumn"
							headerText="#{msg['requirement.list.percentage']}">
							<h:outputText value="#{req.hours}">
								<f:convertNumber minFractionDigits="2" maxFractionDigits="2" />
							</h:outputText>
						</p:column>
	
						<p:column id="incurredHoursColumn"
							headerText="#{msg['requirement.list.incurredHours']}">
							<h:outputText value="#{req.hours}">
								<f:convertNumber minFractionDigits="2" maxFractionDigits="2" />
							</h:outputText>
						</p:column>
	
						<p:column id="hoursColumn"
							headerText="#{msg['requirement.list.hours']}">
							<h:outputText value="#{req.hours}">
								<f:convertNumber minFractionDigits="2" maxFractionDigits="2" />
							</h:outputText>
						</p:column>
	
						<p:column id="startDateColumn"
							headerText="#{msg['requirement.list.startDate']}">
							<h:outputText value="#{req.startDate}" converter="localDateConverter" />
						</p:column>
	
						<p:column id="endDateColumn"
							headerText="#{msg['requirement.list.endDate']}">
							<h:outputText value="#{req.endDate}" converter="localDateConverter" />
						</p:column>
					
						<p:column id="detailsColumn" styleClass="icon-column">
							<p:commandButton title="Detalles" update="layoutCenter" process="@form"
								styleClass="table-button" icon="fa fa-spinner" rendered="#{req.project.methodology.id eq 1}"
								actionListener="#{requirementDetailsController.goToRequirementDetails(req)}" />
							<p:commandButton title="Detalles" update="layoutCenter" process="@form"
								styleClass="table-button" icon="fa fa-tag" rendered="#{req.project.methodology.id eq 2}"
								actionListener="#{requirementDetailsController.goToRequirementDetails(req)}" />
						</p:column>
					</p:dataTable>
				</h:form>				
			</div>
		</div>
	</p:panel>
</ui:composition>